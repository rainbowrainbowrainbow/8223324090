/**
 * dark-mode.css - Complete dark theme — v4.0 redesign
 */

body.dark-mode {
    /* Override design tokens for dark mode */
    --white: #1a1a2e;
    --dark: #E2E8F0;
    --light: #242442;
    --gray: #9CA3AF;
    --gray-light: #6B7280;
    --gray-50: #1e1e32;
    --gray-100: #252540;
    --gray-200: #333350;
    --gray-300: #444466;
    --gray-400: #6B7280;
    --gray-500: #9CA3AF;
    --gray-600: #D1D5DB;
    --gray-700: #E5E7EB;
    --gray-800: #F3F4F6;
    --gray-900: #F9FAFB;

    /* Adjusted shadows for dark */
    --shadow-xs: 0 1px 2px rgba(0,0,0,0.2);
    --shadow-sm: 0 1px 3px rgba(0,0,0,0.3), 0 1px 2px rgba(0,0,0,0.2);
    --shadow: 0 4px 6px -1px rgba(0,0,0,0.4), 0 2px 4px -2px rgba(0,0,0,0.3);
    --shadow-md: 0 10px 15px -3px rgba(0,0,0,0.4), 0 4px 6px -4px rgba(0,0,0,0.3);
    --shadow-lg: 0 20px 25px -5px rgba(0,0,0,0.4), 0 8px 10px -6px rgba(0,0,0,0.3);
    --shadow-xl: 0 25px 50px -12px rgba(0,0,0,0.5);
    --shadow-primary: 0 8px 24px rgba(16,185,129,0.15);

    /* Glass for dark */
    --glass-bg: rgba(26,26,46,0.85);
    --glass-border: rgba(255,255,255,0.05);

    background: #0f0f1a;
    background-image:
        radial-gradient(ellipse at 20% 50%, rgba(16,185,129,0.08) 0%, transparent 50%),
        radial-gradient(ellipse at 80% 20%, rgba(59,130,246,0.06) 0%, transparent 50%),
        radial-gradient(ellipse at 50% 100%, rgba(139,92,246,0.04) 0%, transparent 50%);
    color: #E2E8F0;
}

/* Header */
body.dark-mode .header {
    background: linear-gradient(135deg, #0a1628 0%, #0f1f3a 40%, #0a2540 100%);
    box-shadow: 0 4px 24px rgba(0,0,0,0.3);
}

/* Timeline */
body.dark-mode .timeline-container {
    background: var(--white);
    border-color: var(--gray-200);
}

body.dark-mode .line-header {
    background: linear-gradient(135deg, rgba(16,185,129,0.08) 0%, transparent 100%);
}

body.dark-mode .timeline-line:nth-child(even) .line-header {
    background: linear-gradient(135deg, rgba(16,185,129,0.04) 0%, transparent 100%);
}

body.dark-mode .line-header:hover {
    background: linear-gradient(135deg, rgba(16,185,129,0.15) 0%, rgba(16,185,129,0.05) 100%);
}

body.dark-mode .line-grid {
    background: var(--gray-100);
    border-color: var(--gray-200);
}

body.dark-mode .grid-cell {
    border-right-color: var(--gray-200);
}

body.dark-mode .grid-cell.hour {
    border-right-color: var(--gray-300);
}

body.dark-mode .grid-cell:hover {
    background: rgba(16,185,129,0.15);
}

body.dark-mode .grid-cell.selected {
    background: rgba(16,185,129,0.25);
}

body.dark-mode .timeline-line:nth-child(even) {
    background: rgba(255,255,255,0.02);
}

/* Time scale */
body.dark-mode .time-scale {
    background: var(--white);
}

/* Legend */
body.dark-mode .legend {
    background: var(--white);
    border-color: var(--gray-200);
}

body.dark-mode .legend-item:has(.dot.quest) { background: rgba(139,92,246,0.15); color: #C4B5FD; }
body.dark-mode .legend-item:has(.dot.animation) { background: rgba(59,130,246,0.15); color: #93C5FD; }
body.dark-mode .legend-item:has(.dot.show) { background: rgba(249,115,22,0.15); color: #FDBA74; }
body.dark-mode .legend-item:has(.dot.masterclass) { background: rgba(132,204,22,0.15); color: #BEF264; }
body.dark-mode .legend-item:has(.dot.pinata) { background: rgba(236,72,153,0.15); color: #F9A8D4; }
body.dark-mode .legend-item:has(.dot.photo) { background: rgba(6,182,212,0.15); color: #67E8F9; }
body.dark-mode .legend-item:has(.dot.custom) { background: rgba(100,116,139,0.15); color: #CBD5E1; }
body.dark-mode .legend-item:has(.preliminary-dot) { background: rgba(245,158,11,0.15); color: #FCD34D; }

/* Modals */
body.dark-mode .modal {
    background: rgba(0,0,0,0.7);
}

body.dark-mode .modal-content {
    background: #1e1e32;
    color: #E2E8F0;
    border-color: var(--gray-200);
}

/* Panel */
body.dark-mode .booking-panel {
    background: #1e1e32;
    border-left-color: var(--gray-200);
}

body.dark-mode .panel-header {
    background: #1e1e32;
    border-bottom-color: var(--gray-200);
}

body.dark-mode .selected-info {
    background: linear-gradient(135deg, rgba(16,185,129,0.1) 0%, rgba(16,185,129,0.05) 100%);
    border-color: rgba(16,185,129,0.2);
}

/* Form elements */
body.dark-mode .form-section select,
body.dark-mode .form-section input,
body.dark-mode .form-group input {
    background: var(--gray-100);
    border-color: var(--gray-300);
    color: #E2E8F0;
}

body.dark-mode .form-section select:focus,
body.dark-mode .form-section input:focus,
body.dark-mode .form-group input:focus {
    border-color: var(--primary);
    box-shadow: 0 0 0 4px rgba(16,185,129,0.15);
}

/* Program icons */
body.dark-mode .program-icon {
    background: var(--gray-100);
    border-color: var(--gray-300);
}

body.dark-mode .program-icon .name {
    color: #E2E8F0;
}

body.dark-mode .program-icon.selected {
    background: rgba(16,185,129,0.15);
    border-color: var(--primary);
}

body.dark-mode .program-details {
    background: var(--gray-100);
    border-color: var(--gray-200);
}

/* Control elements */
body.dark-mode .zoom-controls {
    background: var(--gray-100);
    border-color: var(--gray-300);
}

body.dark-mode .zoom-btn {
    color: #9CA3AF;
    border-right-color: var(--gray-300);
}

body.dark-mode .toggle-mini {
    background: var(--gray-100);
    border-color: var(--gray-300);
}

body.dark-mode .btn-undo {
    background: var(--gray-100);
    border-color: var(--gray-300);
}

/* Tooltip */
body.dark-mode .booking-tooltip {
    background: #252540;
    border-color: var(--gray-300);
}

/* Booking detail rows */
body.dark-mode .booking-detail-row {
    border-bottom-color: var(--gray-200);
}

/* Warning banner */
body.dark-mode .warning-banner {
    background: linear-gradient(135deg, #3d3000 0%, #4d4000 100%);
    border-color: #665200;
    color: #FCD34D;
}

/* Custom program section */
body.dark-mode .custom-program-section {
    background: #2d2400;
    border-color: #4d3e00;
}

/* Second animator */
body.dark-mode .second-animator-section {
    background: #1a2536;
    border-color: #2a3d56;
}

/* Extra host */
body.dark-mode .extra-host-section {
    background: rgba(16,185,129,0.08);
    border-color: rgba(16,185,129,0.15);
}

body.dark-mode .extra-host-section .toggle-label {
    color: #6EE7B7;
}

/* Kids count */
body.dark-mode .kids-count-section {
    background: rgba(16,185,129,0.08);
    border-color: rgba(16,185,129,0.15);
}

/* Status radio */
body.dark-mode .status-radio-label {
    border-color: var(--gray-300);
    color: #9CA3AF;
}

body.dark-mode .status-radio input:checked + .status-radio-label.confirmed {
    background: rgba(16,185,129,0.15);
}

body.dark-mode .status-radio input:checked + .status-radio-label.preliminary {
    background: rgba(245,158,11,0.15);
}

/* Minimap */
body.dark-mode .minimap-container {
    background: var(--white);
    border-color: var(--gray-200);
}

/* Telegram */
body.dark-mode .telegram-chat-item {
    border-color: var(--gray-300);
}

body.dark-mode .telegram-chat-item:hover {
    background: rgba(16,185,129,0.1);
}

body.dark-mode .no-chats {
    background: var(--gray-100);
}

/* Settings */
body.dark-mode .settings-section {
    border-bottom-color: var(--gray-200);
}

/* Dashboard */
body.dark-mode .dash-list-item {
    background: var(--gray-100);
}

body.dark-mode .dashboard-section h4 {
    color: #E2E8F0;
}

body.dark-mode .dash-bar-track {
    background: var(--gray-200);
}

body.dark-mode .dash-bar-label {
    color: #D1D5DB;
}

/* Multi-day */
body.dark-mode .day-section {
    border-color: var(--gray-200);
}

body.dark-mode .mini-line-grid {
    background: var(--gray-100);
    border-color: var(--gray-200);
    background-image: repeating-linear-gradient(
        to right,
        var(--gray-200) 0px,
        var(--gray-200) 1px,
        transparent 1px,
        transparent 120px
    );
}

body.dark-mode .mini-line-header {
    background: var(--gray-100);
}

/* Changelog */
body.dark-mode .changelog-section {
    border-bottom-color: var(--gray-200);
}

/* History items */
body.dark-mode .history-item {
    background: var(--gray-100);
}

body.dark-mode .history-item.action-create {
    background: rgba(16,185,129,0.1);
}

body.dark-mode .history-item.action-delete {
    background: rgba(239,68,68,0.1);
}

body.dark-mode .history-item.action-undo {
    background: rgba(245,158,11,0.1);
}

/* Catalog */
body.dark-mode .catalog-program-card {
    background: var(--gray-100);
}

body.dark-mode .catalog-tag {
    background: rgba(59,130,246,0.15);
}

body.dark-mode .catalog-tag.kids {
    background: rgba(139,92,246,0.15);
}

/* Buttons in dark mode */
body.dark-mode .btn-nav {
    background: var(--gray-100);
    border-color: var(--gray-300);
}

/* Colored buttons keep their gradients in dark mode — just adjust opacity */
body.dark-mode .btn-export,
body.dark-mode .btn-history,
body.dark-mode .btn-digest,
body.dark-mode .btn-invite {
    opacity: 0.9;
}

body.dark-mode #dashboardBtn,
body.dark-mode #settingsBtn {
    opacity: 0.9;
}

body.dark-mode .btn-logout {
    background: rgba(255,255,255,0.08);
    border-color: rgba(255,255,255,0.12);
    color: rgba(255,255,255,0.7);
}

/* Admin dropdown in dark */
body.dark-mode .dropdown-content {
    background: #1e1e32;
    border-color: var(--gray-300);
}

body.dark-mode .dropdown-item {
    color: #D1D5DB;
    border-top-color: var(--gray-200);
}

body.dark-mode .dropdown-item:hover {
    background: var(--gray-100);
}

/* Quick stats bar in dark */
body.dark-mode .quick-stats-bar {
    background: linear-gradient(135deg, rgba(16,185,129,0.1) 0%, rgba(16,185,129,0.05) 100%);
    border-color: rgba(16,185,129,0.2);
    color: #6EE7B7;
}

/* Control panel card in dark */
body.dark-mode .control-panel {
    background: var(--white);
    border-color: var(--gray-200);
}

body.dark-mode .btn-close {
    background: var(--gray-100);
}

body.dark-mode .btn-cancel {
    background: var(--gray-100);
    color: #D1D5DB;
}

body.dark-mode .btn-status-toggle {
    background: var(--gray-100);
    border-color: var(--gray-300);
}

/* Day info */
body.dark-mode .day-label {
    background: linear-gradient(135deg, #10B981 0%, #059669 100%);
    color: #FFFFFF;
}

/* Toggle slider */
body.dark-mode .toggle-slider {
    background: var(--gray-300);
}

/* Date input */
body.dark-mode input[type="date"] {
    background: var(--gray-100);
    border-color: var(--primary);
    color: #E2E8F0;
}

/* Days select */
body.dark-mode .days-select {
    background: var(--gray-100);
    border-color: var(--primary);
    color: #E2E8F0;
}

/* Scrollbar */
body.dark-mode ::-webkit-scrollbar-thumb {
    background: var(--gray-300);
}

body.dark-mode ::-webkit-scrollbar-thumb:hover {
    background: var(--gray-400);
}

/* Hosts warning in dark */
body.dark-mode .hosts-warning {
    background: linear-gradient(135deg, #2d2400 0%, #3d3000 100%);
    border-color: #665200;
    color: #FCD34D;
}

/* Pending line in dark */
body.dark-mode .pending-header {
    background: rgba(245,158,11,0.1);
}

body.dark-mode .pending-text {
    color: #FCD34D;
}

/* Note modal */
body.dark-mode .note-modal-overlay {
    background: rgba(0,0,0,0.7);
}

body.dark-mode .note-modal-box {
    background: #1e1e32;
    border-color: var(--gray-200);
}

body.dark-mode .note-modal-box input,
body.dark-mode .note-modal-box textarea {
    background: var(--gray-100);
    border-color: var(--gray-300);
    color: #E2E8F0;
}

/* v5.9: Add line button dark override */
body.dark-mode .btn-add-line-big {
    background: linear-gradient(135deg, rgba(16,185,129,0.1) 0%, rgba(16,185,129,0.15) 100%);
    color: #6EE7B7;
    border-color: rgba(16,185,129,0.4);
}

body.dark-mode .btn-add-line-big:hover {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    color: #FFFFFF;
}

/* v5.9: Toggle labels brighter in dark */
body.dark-mode .toggle-mini-label {
    color: #D1D5DB;
}

/* v5.9: Zoom button active state in dark */
body.dark-mode .zoom-btn.active {
    background: var(--primary);
    color: #FFFFFF;
}

body.dark-mode .zoom-btn:hover:not(.active) {
    background: rgba(16,185,129,0.15);
    color: #6EE7B7;
}

/* v5.9: Change program button in dark */
body.dark-mode .btn-change-program {
    background: rgba(16,185,129,0.1);
    border-color: rgba(16,185,129,0.3);
    color: #6EE7B7;
}

/* v5.10: Dashboard tabs in dark */
body.dark-mode .dash-tab {
    background: var(--gray-100);
    border-color: var(--gray-300);
    color: #9CA3AF;
}

body.dark-mode .dash-tab.active {
    background: var(--primary);
    color: #FFFFFF;
    border-color: var(--primary);
}

body.dark-mode .dash-custom-range input[type="date"] {
    background: var(--gray-100);
    border-color: var(--gray-300);
    color: #E2E8F0;
}

/* v5.10: Afisha auto-time + import in dark */
body.dark-mode .btn-auto-time {
    background: var(--gray-100);
    border-color: var(--gray-300);
}

body.dark-mode .afisha-import-section textarea {
    background: var(--gray-100);
    border-color: var(--gray-300);
    color: #E2E8F0;
}

body.dark-mode .btn-refresh-chats {
    background: var(--gray-100);
    border-color: var(--gray-300);
    color: #9CA3AF;
}

body.dark-mode .digest-section h4 { color: #E2E8F0; }
body.dark-mode .digest-hint { color: #9CA3AF; }
body.dark-mode .toggle-slider { background: #4B5563; }
body.dark-mode #settingsAutoDeleteHours {
    background: var(--gray-100);
    border-color: var(--gray-300);
    color: #E2E8F0;
}

/* v5.15: Status filter in dark */
body.dark-mode .status-filter-controls {
    background: var(--gray-100);
    border-color: var(--gray-300);
}

body.dark-mode .status-filter-btn {
    color: #9CA3AF;
    border-right-color: var(--gray-300);
}

body.dark-mode .status-filter-btn.active {
    background: var(--primary);
    color: #FFFFFF;
}

body.dark-mode .status-filter-btn:hover:not(.active) {
    background: rgba(16,185,129,0.15);
    color: #6EE7B7;
}

/* v5.15: Today button in dark */
body.dark-mode .btn-today.is-today {
    background: var(--gray-300);
    color: var(--gray-500);
}
