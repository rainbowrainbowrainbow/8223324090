#!/usr/bin/env python3
# -*- coding: utf-8 -*-

import json

PLAN = {
    "Этап 1: Анализ и проектирование механик": {
        "tasks": [
            "Аудит текущей боевой системы и структуры классов Entity/Player/Monster",
            "Проектирование новых навыков и пассивных эффектов с учётом расширенной логики",
            "Разработка кривых прогрессии уровня, урона и защиты",
            "Составление тестовых сценариев для каждой механики"
        ],
        "duration": "2 недели",
        "owner": "Lead Game Designer"
    },
    "Этап 2: Рефакторинг и архитектура кода": {
        "tasks": [
            "Модульное разбиение: animation.py, combat.py, ui.py, data.py",
            "Вынести конфигурацию анимаций и ASCII-арта в отдельные JSON-файлы",
            "Реализовать систему событий/хуков для игровых действий",
            "Оптимизировать методы display_hud, clear_screen и групповые отрисовки"
        ],
        "duration": "3 недели",
        "owner": "Python Developer"
    },
    "Этап 3: Система анимаций": {
        "tasks": [
            "Создать AnimationManager для загрузки и воспроизведения фреймов",
            "Перевести встроенные HERO_ACTION_FRAMES и SKILL_ANIMATIONS в animations.json",
            "Добавить поддержку асинхронного воспроизведения через asyncio",
            "Реализовать цветовые и particle-эффекты при помощи rich"
        ],
        "duration": "2 недели",
        "owner": "Animator"
    },
    "Этап 4: UI/UX и HUD": {
        "tasks": [
            "Перенести рендер HUD и меню в модуль ui.py с использованием rich",
            "Добавить адаптивную верстку под разные размеры терминала",
            "Реализовать диалоговые окна с выбором и аватары NPC в ASCII",
            "Добавить поддержку управления мышью и кастомных хоткеев"
        ],
        "duration": "1.5 недели",
        "owner": "UI/UX Designer"
    },
    "Этап 5: Тестирование и оптимизация производительности": {
        "tasks": [
            "Написать юнит-тесты для всех ключевых классов и функций (pytest)",
            "Провести профилирование combat_loop и анимаций, оптимизировать узкие места",
            "Сократить задержки анимаций и объединить выводы в буфер",
            "Настроить CI/CD: GitHub Actions для автотестов, линтинга и сборки"
        ],
        "duration": "2 недели",
        "owner": "QA Engineer"
    },
    "Этап 6: Документация и подготовка к релизу": {
        "tasks": [
            "Сгенерировать документацию API и руководство пользователя с Sphinx",
            "Подготовить README, примеры запуска и скриншоты в Markdown",
            "Собрать wheel/zip дистрибутив для Windows и Linux",
            "Настроить релизные workflow в GitHub Actions и метки релизов"
        ],
        "duration": "1 неделя",
        "owner": "DevOps / Tech Writer"
    }
}

if __name__ == "__main__":
    print(json.dumps(PLAN, ensure_ascii=False, indent=4))
